package mum.waa.repository;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

import org.springframework.stereotype.Repository;

import mum.waa.model.Product;

@Repository
public class ProductRepositoryImpl implements ProductRepository{
	
	private List<Product> products= new ArrayList<Product>();
	
	public ProductRepositoryImpl() {
		Product iPhone = new Product();
		iPhone.setProductId("I-100");
		iPhone.setName("Iphone");
		iPhone.setUnitPrice(BigDecimal.valueOf(106));
		iPhone.setUnitsInStock(100);
		
		Product s7 = new Product();
		s7.setProductId("S-100");
		s7.setName("s7");
		s7.setUnitPrice(BigDecimal.valueOf(165));
		s7.setUnitsInStock(100);
		
		products.add(iPhone);
		products.add(s7);
	}
	
	public Product getProductById(String productId) {
		// TODO Auto-generated method stub
		for (Product product : products) {
			if(product.getProductId().equals(productId))
			{
				return product;
			}
		}
	
		return null;
	}

	public List<Product> getAllProducts() {
		// TODO Auto-generated method stub
		return products;
	}

	@Override
	public boolean addProduct(Product product) {
		products.add(product);
		return true;
	}

	@Override
	public boolean deleteProduct(String productId) {
		products.removeIf(p->p.getProductId().equals(productId));
		return true;
	}

	@Override
	public boolean updateProduct(Product product) {
		// TODO Auto-generated method stub
		int index = products.indexOf(product);
		System.out.println(index);
		products.set(index, Jan 19, 2017 10:56:17 PM org.springframework.web.servlet.PageNotFound noHandlerFound
				WARNING: No mapping found for HTTP request with URI [/Lab3/editProduct/myres/css/mystyle.css] in DispatcherServlet with name 'springDispatcherServlet'
				Jan 19, 2017 10:56:17 PM org.springframework.web.servlet.PageNotFound noHandlerFound
				WARNING: No mapping found for HTTP request with URI [/Lab3/editProduct/res/bootstrap/3.3.7-1/css/bootstrap.min.css] in DispatcherServlet with name 'springDispatcherServlet'
				Jan 19, 2017 10:56:18 PM org.springframework.validation.DataBinder addBindValues
				WARNING: Skipping URI variable 'productId' since the request contains a bind value with the same name.
				Jan 19, 2017 10:56:35 PM org.apache.catalina.core.StandardContext reload
				INFO: Reloading Context with name [/Lab3] has started
				Jan 19, 2017 10:56:35 PM org.apache.catalina.core.ApplicationContext log
				INFO: Destroying Spring FrameworkServlet 'springDispatcherServlet'
				Jan 19, 2017 10:56:35 PM org.springframework.web.context.support.XmlWebApplicationContext doClose
				INFO: Closing WebApplicationContext for namespace 'springDispatcherServlet-servlet': startup date [Thu Jan 19 22:55:28 CST 2017]; root of context hierarchy
				Jan 19, 2017 10:56:37 PM org.apache.jasper.servlet.TldScanner scanJars
				INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
				Jan 19, 2017 10:56:37 PM org.apache.catalina.core.ApplicationContext log
				INFO: No Spring WebApplicationInitializer types detected on classpath
				Jan 19, 2017 10:56:37 PM org.apache.catalina.core.ApplicationContext log
				INFO: Initializing Spring FrameworkServlet 'springDispatcherServlet'
				Jan 19, 2017 10:56:37 PM org.springframework.web.servlet.DispatcherServlet initServletBean
				INFO: FrameworkServlet 'springDispatcherServlet': initialization started
				Jan 19, 2017 10:56:37 PM org.springframework.web.context.support.XmlWebApplicationContext prepareRefresh
				INFO: Refreshing WebApplicationContext for namespace 'springDispatcherServlet-servlet': startup date [Thu Jan 19 22:56:37 CST 2017]; root of context hierarchy
				Jan 19, 2017 10:56:37 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
				INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/application-context.xml]
);
		return true;
	}

}
